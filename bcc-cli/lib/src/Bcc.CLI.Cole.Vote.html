<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Bcc.CLI.Cole.Vote</span><span>
</span><span id="line-4"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteError"><span class="hs-identifier">ColeVoteError</span></a></span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-5"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#readColeVote"><span class="hs-identifier">readColeVote</span></a></span><span>
</span><span id="line-6"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#renderColeVoteError"><span class="hs-identifier">renderColeVoteError</span></a></span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#runVoteCreation"><span class="hs-identifier">runVoteCreation</span></a></span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#submitColeVote"><span class="hs-identifier">submitColeVote</span></a></span><span>
</span><span id="line-9"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Bcc.Prelude</span></span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Monad.Trans.Except.Extra</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">firstExceptT</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">hoistEither</span></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Tracer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">stdoutTracer</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">traceWith</span></span><span class="hs-special">)</span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier">Data.ByteString</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BS</span></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/text-1.2.4.1/src"><span class="hs-identifier">Data.Text</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Bcc.Binary</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Binary</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Bcc.CLI.Cole.UpdateProposal.html"><span class="hs-identifier">Bcc.CLI.Cole.UpdateProposal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Bcc.CLI.Cole.UpdateProposal.html#ColeUpdateProposalError"><span class="hs-identifier">ColeUpdateProposalError</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>                     </span><span class="annot"><a href="Bcc.CLI.Cole.UpdateProposal.html#readColeUpdateProposal"><span class="hs-identifier">readColeUpdateProposal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Shardagnostic.Consensus.Ledger.SupportsMempool</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">txId</span></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Shardagnostic.Consensus.Util.Condense</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">condense</span></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="../file:///home/rmourey26/bccio/bcc-node/dist-newstyle/build/x86_64-linux/ghc-8.10.4/bcc-api-1.99.0/noopt/doc/html/bcc-api/src"><span class="hs-identifier">Bcc.Api.Cole</span></a></span><span>
</span><span id="line-26"></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Bcc.CLI.Cole.Genesis.html"><span class="hs-identifier">Bcc.CLI.Cole.Genesis</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Bcc.CLI.Cole.Genesis.html#ColeGenesisError"><span class="hs-identifier">ColeGenesisError</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Bcc.CLI.Cole.Key.html"><span class="hs-identifier">Bcc.CLI.Cole.Key</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Bcc.CLI.Cole.Key.html#ColeKeyFailure"><span class="hs-identifier">ColeKeyFailure</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Bcc.CLI.Cole.Key.html#readColeSigningKey"><span class="hs-identifier">readColeSigningKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Bcc.CLI.Cole.Tx.html"><span class="hs-identifier">Bcc.CLI.Cole.Tx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Bcc.CLI.Cole.Tx.html#ColeTxError"><span class="hs-identifier">ColeTxError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Bcc.CLI.Cole.Tx.html#nodeSubmitTx"><span class="hs-identifier">nodeSubmitTx</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Bcc.CLI.Helpers.html"><span class="hs-identifier">Bcc.CLI.Helpers</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Bcc.CLI.Helpers.html#HelpersError"><span class="hs-identifier">HelpersError</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Bcc.CLI.Helpers.html#ensureNewFileLBS"><span class="hs-identifier">ensureNewFileLBS</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Bcc.CLI.Sophie.Commands.html"><span class="hs-identifier">Bcc.CLI.Sophie.Commands</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Bcc.CLI.Sophie.Commands.html#ColeKeyFormat"><span class="hs-identifier">ColeKeyFormat</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Bcc.CLI.Types.html"><span class="hs-identifier">Bcc.CLI.Types</span></a></span><span>
</span><span id="line-33"></span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-keyword">data</span><span> </span><span id="ColeVoteError"><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteError"><span class="hs-identifier hs-var">ColeVoteError</span></a></span></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ColeVoteDecodingError"><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteDecodingError"><span class="hs-identifier hs-var">ColeVoteDecodingError</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ColeVoteGenesisReadError"><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteGenesisReadError"><span class="hs-identifier hs-var">ColeVoteGenesisReadError</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Bcc.CLI.Cole.Genesis.html#ColeGenesisError"><span class="hs-identifier hs-type">ColeGenesisError</span></a></span><span>
</span><span id="line-38"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ColeVoteKeyReadFailure"><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteKeyReadFailure"><span class="hs-identifier hs-var">ColeVoteKeyReadFailure</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Bcc.CLI.Cole.Key.html#ColeKeyFailure"><span class="hs-identifier hs-type">ColeKeyFailure</span></a></span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ColeVoteReadFileFailure"><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteReadFileFailure"><span class="hs-identifier hs-var">ColeVoteReadFileFailure</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-40"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ColeVoteTxSubmissionError"><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteTxSubmissionError"><span class="hs-identifier hs-var">ColeVoteTxSubmissionError</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Bcc.CLI.Cole.Tx.html#ColeTxError"><span class="hs-identifier hs-type">ColeTxError</span></a></span><span>
</span><span id="line-41"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ColeVoteUpdateProposalFailure"><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteUpdateProposalFailure"><span class="hs-identifier hs-var">ColeVoteUpdateProposalFailure</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Bcc.CLI.Cole.UpdateProposal.html#ColeUpdateProposalError"><span class="hs-identifier hs-type">ColeUpdateProposalError</span></a></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ColeVoteUpdateProposalDecodingError"><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteUpdateProposalDecodingError"><span class="hs-identifier hs-var">ColeVoteUpdateProposalDecodingError</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Binary.DecoderError</span></span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="ColeVoteUpdateHelperError"><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteUpdateHelperError"><span class="hs-identifier hs-var">ColeVoteUpdateHelperError</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Bcc.CLI.Helpers.html#HelpersError"><span class="hs-identifier hs-type">HelpersError</span></a></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span id="local-6989586621679348253"><span id="local-6989586621679348255"><span id="local-6989586621679348257"><span class="annot"><span class="annottext">Int -&gt; ColeVoteError -&gt; ShowS
[ColeVoteError] -&gt; ShowS
ColeVoteError -&gt; String
(Int -&gt; ColeVoteError -&gt; ShowS)
-&gt; (ColeVoteError -&gt; String)
-&gt; ([ColeVoteError] -&gt; ShowS)
-&gt; Show ColeVoteError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [ColeVoteError] -&gt; ShowS
$cshowList :: [ColeVoteError] -&gt; ShowS
show :: ColeVoteError -&gt; String
$cshow :: ColeVoteError -&gt; String
showsPrec :: Int -&gt; ColeVoteError -&gt; ShowS
$cshowsPrec :: Int -&gt; ColeVoteError -&gt; ShowS
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span>
</span><span id="line-45"></span><span>
</span><span id="line-46"></span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#renderColeVoteError"><span class="hs-identifier hs-type">renderColeVoteError</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteError"><span class="hs-identifier hs-type">ColeVoteError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-type">Text</span></a></span><span>
</span><span id="line-47"></span><span id="renderColeVoteError"><span class="annot"><span class="annottext">renderColeVoteError :: ColeVoteError -&gt; Text
</span><a href="Bcc.CLI.Cole.Vote.html#renderColeVoteError"><span class="hs-identifier hs-var hs-var">renderColeVoteError</span></a></span></span><span> </span><span id="local-6989586621679348251"><span class="annot"><span class="annottext">ColeVoteError
</span><a href="#local-6989586621679348251"><span class="hs-identifier hs-var">bVerr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-48"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ColeVoteError
</span><a href="#local-6989586621679348251"><span class="hs-identifier hs-var">bVerr</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteDecodingError"><span class="hs-identifier hs-type">ColeVoteDecodingError</span></a></span><span> </span><span id="local-6989586621679348250"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679348250"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Error decoding Cole vote at &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span>  </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679348250"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteGenesisReadError"><span class="hs-identifier hs-type">ColeVoteGenesisReadError</span></a></span><span> </span><span id="local-6989586621679348248"><span class="annot"><span class="annottext">ColeGenesisError
</span><a href="#local-6989586621679348248"><span class="hs-identifier hs-var">genErr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Error reading the genesis file:&quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColeGenesisError -&gt; String
forall a b. (Show a, ConvertText String b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">ColeGenesisError
</span><a href="#local-6989586621679348248"><span class="hs-identifier hs-var">genErr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteReadFileFailure"><span class="hs-identifier hs-type">ColeVoteReadFileFailure</span></a></span><span> </span><span id="local-6989586621679348246"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679348246"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span id="local-6989586621679348245"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679348245"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Error reading Cole vote at &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679348246"><span class="hs-identifier hs-var">fp</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; Error: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679348245"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteTxSubmissionError"><span class="hs-identifier hs-type">ColeVoteTxSubmissionError</span></a></span><span> </span><span id="local-6989586621679348244"><span class="annot"><span class="annottext">ColeTxError
</span><a href="#local-6989586621679348244"><span class="hs-identifier hs-var">txErr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Error submitting the transaction: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColeTxError -&gt; String
forall a b. (Show a, ConvertText String b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">ColeTxError
</span><a href="#local-6989586621679348244"><span class="hs-identifier hs-var">txErr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteUpdateProposalDecodingError"><span class="hs-identifier hs-type">ColeVoteUpdateProposalDecodingError</span></a></span><span> </span><span id="local-6989586621679348243"><span class="annot"><span class="annottext">DecoderError
</span><a href="#local-6989586621679348243"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Error decoding Cole update proposal: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DecoderError -&gt; String
forall a b. (Show a, ConvertText String b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">DecoderError
</span><a href="#local-6989586621679348243"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteUpdateProposalFailure"><span class="hs-identifier hs-type">ColeVoteUpdateProposalFailure</span></a></span><span> </span><span id="local-6989586621679348242"><span class="annot"><span class="annottext">ColeUpdateProposalError
</span><a href="#local-6989586621679348242"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Error reading the update proposal: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColeUpdateProposalError -&gt; String
forall a b. (Show a, ConvertText String b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">ColeUpdateProposalError
</span><a href="#local-6989586621679348242"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteUpdateHelperError"><span class="hs-identifier hs-type">ColeVoteUpdateHelperError</span></a></span><span> </span><span id="local-6989586621679348241"><span class="annot"><span class="annottext">HelpersError
</span><a href="#local-6989586621679348241"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Error creating the vote: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HelpersError -&gt; String
forall a b. (Show a, ConvertText String b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">HelpersError
</span><a href="#local-6989586621679348241"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteKeyReadFailure"><span class="hs-identifier hs-type">ColeVoteKeyReadFailure</span></a></span><span> </span><span id="local-6989586621679348240"><span class="annot"><span class="annottext">ColeKeyFailure
</span><a href="#local-6989586621679348240"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Error reading the signing key: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/text-1.2.4.1/src"><span class="hs-identifier hs-var">Text.pack</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColeKeyFailure -&gt; String
forall a b. (Show a, ConvertText String b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">ColeKeyFailure
</span><a href="#local-6989586621679348240"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span>
</span><span id="line-58"></span><span>
</span><span id="line-59"></span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#runVoteCreation"><span class="hs-identifier hs-type">runVoteCreation</span></a></span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/rmourey26/bccio/bcc-node/dist-newstyle/build/x86_64-linux/ghc-8.10.4/bcc-api-1.99.0/noopt/doc/html/bcc-api/src"><span class="hs-identifier hs-type">NetworkId</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Bcc.CLI.Types.html#SigningKeyFile"><span class="hs-identifier hs-type">SigningKeyFile</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">Bool</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteError"><span class="hs-identifier hs-type">ColeVoteError</span></a></span><span> </span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span id="runVoteCreation"><span class="annot"><span class="annottext">runVoteCreation :: NetworkId
-&gt; SigningKeyFile
-&gt; String
-&gt; Bool
-&gt; String
-&gt; ExceptT ColeVoteError IO ()
</span><a href="Bcc.CLI.Cole.Vote.html#runVoteCreation"><span class="hs-identifier hs-var hs-var">runVoteCreation</span></a></span></span><span> </span><span id="local-6989586621679348239"><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621679348239"><span class="hs-identifier hs-var">nw</span></a></span></span><span> </span><span id="local-6989586621679348238"><span class="annot"><span class="annottext">SigningKeyFile
</span><a href="#local-6989586621679348238"><span class="hs-identifier hs-var">sKey</span></a></span></span><span> </span><span id="local-6989586621679348237"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679348237"><span class="hs-identifier hs-var">upPropFp</span></a></span></span><span> </span><span id="local-6989586621679348236"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679348236"><span class="hs-identifier hs-var">voteBool</span></a></span></span><span> </span><span id="local-6989586621679348235"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679348235"><span class="hs-identifier hs-var">outputFp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-67"></span><span>  </span><span id="local-6989586621679348234"><span class="annot"><span class="annottext">SomeColeSigningKey
</span><a href="#local-6989586621679348234"><span class="hs-identifier hs-var">sK</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ColeKeyFailure -&gt; ColeVoteError)
-&gt; ExceptT ColeKeyFailure IO SomeColeSigningKey
-&gt; ExceptT ColeVoteError IO SomeColeSigningKey
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><span class="hs-identifier hs-var">firstExceptT</span></span><span> </span><span class="annot"><span class="annottext">ColeKeyFailure -&gt; ColeVoteError
</span><a href="Bcc.CLI.Cole.Vote.html#ColeVoteKeyReadFailure"><span class="hs-identifier hs-var">ColeVoteKeyReadFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT ColeKeyFailure IO SomeColeSigningKey
 -&gt; ExceptT ColeVoteError IO SomeColeSigningKey)
-&gt; ExceptT ColeKeyFailure IO SomeColeSigningKey
-&gt; ExceptT ColeVoteError IO SomeColeSigningKey
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ColeKeyFormat
-&gt; SigningKeyFile -&gt; ExceptT ColeKeyFailure IO SomeColeSigningKey
</span><a href="Bcc.CLI.Cole.Key.html#readColeSigningKey"><span class="hs-identifier hs-var">readColeSigningKey</span></a></span><span> </span><span class="annot"><span class="annottext">ColeKeyFormat
</span><a href="Bcc.CLI.Sophie.Commands.html#NonLegacyColeKeyFormat"><span class="hs-identifier hs-var">NonLegacyColeKeyFormat</span></a></span><span> </span><span class="annot"><span class="annottext">SigningKeyFile
</span><a href="#local-6989586621679348238"><span class="hs-identifier hs-var">sKey</span></a></span><span>
</span><span id="line-68"></span><span>  </span><span id="local-6989586621679348232"><span class="annot"><span class="annottext">ColeUpdateProposal
</span><a href="#local-6989586621679348232"><span class="hs-identifier hs-var">proposal</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(ColeUpdateProposalError -&gt; ColeVoteError)
-&gt; ExceptT ColeUpdateProposalError IO ColeUpdateProposal
-&gt; ExceptT ColeVoteError IO ColeUpdateProposal
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><span class="hs-identifier hs-var">firstExceptT</span></span><span> </span><span class="annot"><span class="annottext">ColeUpdateProposalError -&gt; ColeVoteError
</span><a href="Bcc.CLI.Cole.Vote.html#ColeVoteUpdateProposalFailure"><span class="hs-identifier hs-var">ColeVoteUpdateProposalFailure</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT ColeUpdateProposalError IO ColeUpdateProposal
 -&gt; ExceptT ColeVoteError IO ColeUpdateProposal)
-&gt; ExceptT ColeUpdateProposalError IO ColeUpdateProposal
-&gt; ExceptT ColeVoteError IO ColeUpdateProposal
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ExceptT ColeUpdateProposalError IO ColeUpdateProposal
</span><a href="Bcc.CLI.Cole.UpdateProposal.html#readColeUpdateProposal"><span class="hs-identifier hs-var">readColeUpdateProposal</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679348237"><span class="hs-identifier hs-var">upPropFp</span></a></span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679348231"><span class="annot"><span class="annottext">vote :: ColeVote
</span><a href="#local-6989586621679348231"><span class="hs-identifier hs-var hs-var">vote</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NetworkId
-&gt; SomeColeSigningKey -&gt; ColeUpdateProposal -&gt; Bool -&gt; ColeVote
</span><a href="../file:///home/rmourey26/bccio/bcc-node/dist-newstyle/build/x86_64-linux/ghc-8.10.4/bcc-api-1.99.0/noopt/doc/html/bcc-api/src"><span class="hs-identifier hs-var">makeColeVote</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621679348239"><span class="hs-identifier hs-var">nw</span></a></span><span> </span><span class="annot"><span class="annottext">SomeColeSigningKey
</span><a href="#local-6989586621679348234"><span class="hs-identifier hs-var">sK</span></a></span><span> </span><span class="annot"><span class="annottext">ColeUpdateProposal
</span><a href="#local-6989586621679348232"><span class="hs-identifier hs-var">proposal</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679348236"><span class="hs-identifier hs-var">voteBool</span></a></span><span>
</span><span id="line-70"></span><span>  </span><span class="annot"><span class="annottext">(HelpersError -&gt; ColeVoteError)
-&gt; ExceptT HelpersError IO () -&gt; ExceptT ColeVoteError IO ()
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><span class="hs-identifier hs-var">firstExceptT</span></span><span> </span><span class="annot"><span class="annottext">HelpersError -&gt; ColeVoteError
</span><a href="Bcc.CLI.Cole.Vote.html#ColeVoteUpdateHelperError"><span class="hs-identifier hs-var">ColeVoteUpdateHelperError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT HelpersError IO () -&gt; ExceptT ColeVoteError IO ())
-&gt; (ByteString -&gt; ExceptT HelpersError IO ())
-&gt; ByteString
-&gt; ExceptT ColeVoteError IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ByteString -&gt; ExceptT HelpersError IO ()
</span><a href="Bcc.CLI.Helpers.html#ensureNewFileLBS"><span class="hs-identifier hs-var">ensureNewFileLBS</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679348235"><span class="hs-identifier hs-var">outputFp</span></a></span><span>
</span><span id="line-71"></span><span>    </span><span class="annot"><span class="annottext">(ByteString -&gt; ExceptT ColeVoteError IO ())
-&gt; ByteString -&gt; ExceptT ColeVoteError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">ColeVote -&gt; ByteString
forall a. SerialiseAsRawBytes a =&gt; a -&gt; ByteString
</span><a href="../file:///home/rmourey26/bccio/bcc-node/dist-newstyle/build/x86_64-linux/ghc-8.10.4/bcc-api-1.99.0/noopt/doc/html/bcc-api/src"><span class="hs-identifier hs-var">serialiseToRawBytes</span></a></span><span> </span><span class="annot"><span class="annottext">ColeVote
</span><a href="#local-6989586621679348231"><span class="hs-identifier hs-var">vote</span></a></span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#submitColeVote"><span class="hs-identifier hs-type">submitColeVote</span></a></span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/rmourey26/bccio/bcc-node/dist-newstyle/build/x86_64-linux/ghc-8.10.4/bcc-api-1.99.0/noopt/doc/html/bcc-api/src"><span class="hs-identifier hs-type">NetworkId</span></a></span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteError"><span class="hs-identifier hs-type">ColeVoteError</span></a></span><span> </span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span id="submitColeVote"><span class="annot"><span class="annottext">submitColeVote :: NetworkId -&gt; String -&gt; ExceptT ColeVoteError IO ()
</span><a href="Bcc.CLI.Cole.Vote.html#submitColeVote"><span class="hs-identifier hs-var hs-var">submitColeVote</span></a></span></span><span> </span><span id="local-6989586621679348227"><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621679348227"><span class="hs-identifier hs-var">network</span></a></span></span><span> </span><span id="local-6989586621679348226"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679348226"><span class="hs-identifier hs-var">voteFp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-78"></span><span>    </span><span id="local-6989586621679348225"><span class="annot"><span class="annottext">ColeVote
</span><a href="#local-6989586621679348225"><span class="hs-identifier hs-var">vote</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; ExceptT ColeVoteError IO ColeVote
</span><a href="Bcc.CLI.Cole.Vote.html#readColeVote"><span class="hs-identifier hs-var">readColeVote</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679348226"><span class="hs-identifier hs-var">voteFp</span></a></span><span>
</span><span id="line-79"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679348224"><span class="annot"><span class="annottext">genTx :: GenTx ColeBlock
</span><a href="#local-6989586621679348224"><span class="hs-identifier hs-var hs-var">genTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ColeVote -&gt; GenTx ColeBlock
</span><a href="../file:///home/rmourey26/bccio/bcc-node/dist-newstyle/build/x86_64-linux/ghc-8.10.4/bcc-api-1.99.0/noopt/doc/html/bcc-api/src"><span class="hs-identifier hs-var">toColeLedgertoColeVote</span></a></span><span> </span><span class="annot"><span class="annottext">ColeVote
</span><a href="#local-6989586621679348225"><span class="hs-identifier hs-var">vote</span></a></span><span>
</span><span id="line-80"></span><span>    </span><span class="annot"><span class="annottext">Tracer (ExceptT ColeVoteError IO) String
-&gt; String -&gt; ExceptT ColeVoteError IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="annot"><span class="annottext">Tracer (ExceptT ColeVoteError IO) String
forall (m :: * -&gt; *). MonadIO m =&gt; Tracer m String
</span><span class="hs-identifier hs-var">stdoutTracer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Vote TxId: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">TxId (GenTx ColeBlock) -&gt; String
forall a. Condense a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">condense</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GenTx ColeBlock -&gt; TxId (GenTx ColeBlock)
forall tx. HasTxId tx =&gt; tx -&gt; TxId tx
</span><span class="hs-identifier hs-var">txId</span></span><span> </span><span class="annot"><span class="annottext">GenTx ColeBlock
</span><a href="#local-6989586621679348224"><span class="hs-identifier hs-var">genTx</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>    </span><span class="annot"><span class="annottext">(ColeTxError -&gt; ColeVoteError)
-&gt; ExceptT ColeTxError IO () -&gt; ExceptT ColeVoteError IO ()
forall (m :: * -&gt; *) x y a.
Functor m =&gt;
(x -&gt; y) -&gt; ExceptT x m a -&gt; ExceptT y m a
</span><span class="hs-identifier hs-var">firstExceptT</span></span><span> </span><span class="annot"><span class="annottext">ColeTxError -&gt; ColeVoteError
</span><a href="Bcc.CLI.Cole.Vote.html#ColeVoteTxSubmissionError"><span class="hs-identifier hs-var">ColeVoteTxSubmissionError</span></a></span><span> </span><span class="annot"><span class="annottext">(ExceptT ColeTxError IO () -&gt; ExceptT ColeVoteError IO ())
-&gt; ExceptT ColeTxError IO () -&gt; ExceptT ColeVoteError IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkId -&gt; GenTx ColeBlock -&gt; ExceptT ColeTxError IO ()
</span><a href="Bcc.CLI.Cole.Tx.html#nodeSubmitTx"><span class="hs-identifier hs-var">nodeSubmitTx</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkId
</span><a href="#local-6989586621679348227"><span class="hs-identifier hs-var">network</span></a></span><span> </span><span class="annot"><span class="annottext">GenTx ColeBlock
</span><a href="#local-6989586621679348224"><span class="hs-identifier hs-var">genTx</span></a></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#readColeVote"><span class="hs-identifier hs-type">readColeVote</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-type">FilePath</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/transformers-0.5.6.2/src"><span class="hs-identifier hs-type">ExceptT</span></a></span><span> </span><span class="annot"><a href="Bcc.CLI.Cole.Vote.html#ColeVoteError"><span class="hs-identifier hs-type">ColeVoteError</span></a></span><span> </span><span class="annot"><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/ghc-prim-0.6.1/src"><span class="hs-identifier hs-type">IO</span></a></span><span> </span><span class="annot"><a href="../file:///home/rmourey26/bccio/bcc-node/dist-newstyle/build/x86_64-linux/ghc-8.10.4/bcc-api-1.99.0/noopt/doc/html/bcc-api/src"><span class="hs-identifier hs-type">ColeVote</span></a></span><span>
</span><span id="line-84"></span><span id="readColeVote"><span class="annot"><span class="annottext">readColeVote :: String -&gt; ExceptT ColeVoteError IO ColeVote
</span><a href="Bcc.CLI.Cole.Vote.html#readColeVote"><span class="hs-identifier hs-var hs-var">readColeVote</span></a></span></span><span> </span><span id="local-6989586621679348222"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679348222"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-85"></span><span>  </span><span id="local-6989586621679348221"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679348221"><span class="hs-identifier hs-var">voteBs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO ByteString -&gt; ExceptT ColeVoteError IO ByteString
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var">liftIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO ByteString -&gt; ExceptT ColeVoteError IO ByteString)
-&gt; IO ByteString -&gt; ExceptT ColeVoteError IO ByteString
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO ByteString
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/bytestring-0.10.12.0/src"><span class="hs-identifier hs-var">BS.readFile</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679348222"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679348218"><span class="annot"><span class="annottext">mVote :: Maybe ColeVote
</span><a href="#local-6989586621679348218"><span class="hs-identifier hs-var hs-var">mVote</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AsType ColeVote -&gt; ByteString -&gt; Maybe ColeVote
forall a.
SerialiseAsRawBytes a =&gt;
AsType a -&gt; ByteString -&gt; Maybe a
</span><a href="../file:///home/rmourey26/bccio/bcc-node/dist-newstyle/build/x86_64-linux/ghc-8.10.4/bcc-api-1.99.0/noopt/doc/html/bcc-api/src"><span class="hs-identifier hs-var">deserialiseFromRawBytes</span></a></span><span> </span><span class="annot"><span class="annottext">AsType ColeVote
</span><a href="../file:///home/rmourey26/bccio/bcc-node/dist-newstyle/build/x86_64-linux/ghc-8.10.4/bcc-api-1.99.0/noopt/doc/html/bcc-api/src"><span class="hs-identifier hs-var">AsColeVote</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621679348221"><span class="hs-identifier hs-var">voteBs</span></a></span><span>
</span><span id="line-87"></span><span>  </span><span class="annot"><span class="annottext">Either ColeVoteError ColeVote -&gt; ExceptT ColeVoteError IO ColeVote
forall (m :: * -&gt; *) x a. Monad m =&gt; Either x a -&gt; ExceptT x m a
</span><span class="hs-identifier hs-var">hoistEither</span></span><span> </span><span class="annot"><span class="annottext">(Either ColeVoteError ColeVote
 -&gt; ExceptT ColeVoteError IO ColeVote)
-&gt; Either ColeVoteError ColeVote
-&gt; ExceptT ColeVoteError IO ColeVote
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Either ColeVoteError ColeVote
-&gt; (ColeVote -&gt; Either ColeVoteError ColeVote)
-&gt; Maybe ColeVote
-&gt; Either ColeVoteError ColeVote
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColeVoteError -&gt; Either ColeVoteError ColeVote
forall a b. a -&gt; Either a b
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(ColeVoteError -&gt; Either ColeVoteError ColeVote)
-&gt; ColeVoteError -&gt; Either ColeVoteError ColeVote
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ColeVoteError
</span><a href="Bcc.CLI.Cole.Vote.html#ColeVoteDecodingError"><span class="hs-identifier hs-var">ColeVoteDecodingError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679348222"><span class="hs-identifier hs-var">fp</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ColeVote -&gt; Either ColeVoteError ColeVote
forall a b. b -&gt; Either a b
</span><a href="../file:///home/rmourey26/.ghcup/ghc/8.10.4/share/doc/ghc-8.10.4/html/libraries/base-4.14.1.0/src"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe ColeVote
</span><a href="#local-6989586621679348218"><span class="hs-identifier hs-var">mVote</span></a></span><span>
</span><span id="line-88"></span></pre></body></html>